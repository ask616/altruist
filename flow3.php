<?php

  $itemCosts = array(
    "SCHOOL_COST" => '{
                        "cost":3000,
                        "count":0,
                        "msg_for_single":"You could sponsor a school to give <span id=\'a1\' class=\'num_incr\' style=\'font-size:56px;\'>200</span> students a decent education",
                        "msg_part1":"You could sponsor ",
                        "msg_part2":" schools sustaining <span id=\'a1\' class=\'num_incr\' style=\'font-size:56px;\'>200</span> students each",
                        "img_path":"img/school.png"
                      }',
    "HOME_COST" => '{
                        "cost":700,
                        "count":0,
                        "msg_for_single":"You could give a family a place to call home",
                        "msg_part1":"You could provide homes for ",
                        "msg_part2":" families that are currently streetbound",
                        "img_path":"img/home.png"
                      }',
    "WORKER_SALARY" => '{
                        "cost":500,
                        "count":0,
                        "msg_for_single":"You could pay a typical labor worker\'s salary",
                        "msg_part1":"You could pay for the salaries of ",
                        "msg_part2":" typical workers",
                        "img_path":"img/worker.png"
                      }',
    "SCHOLARSHIP_COST" => '{
                        "cost":300,
                        "count":0,
                        "msg_for_single":"You could provide a student with a scholarship to go to college for better prospects in the future",
                        "msg_part1":"You could finance ",
                        "msg_part2":" student scholarships for college",
                        "img_path":"img/scholarship.png"
                      }',
    "ORPHAN_YEAR_COST" => '{
                        "cost":200,
                        "count":0,
                        "msg_for_single":"You could sponsor an orphan and pay their living costs and other fees throughout a year",
                        "msg_part1":"You could sponsor ",
                        "msg_part2":" orphans giving each a fully funded year in an orphanage",
                        "img_path":"img/orphan.png"
                      }',
    "RICKSHAW_COST" => '{
                        "cost":50,
                        "count":0,
                        "msg_for_single":"You could purchase a rickshaw for someone to use as a means of income",
                        "msg_part1":"You could purchase ",
                        "msg_part2":" rickshaws allowing people to generate an income by giving rides",
                        "img_path":"img/rickshaw.png"
                      }',
    "BICYCLE_COST" => '{
                        "cost":25,
                        "count":0,
                        "msg_for_single":"You could give a person a bicycle to get from place to place",
                        "msg_part1":"You could introduce up to ",
                        "msg_part2":" bicycles in areas where they are needed for easy and useful transportation",
                        "img_path":"img/bicycle.png"
                      }',
    "BOOK_COST" => '{
                        "cost":8,
                        "count":0,
                        "msg_for_single":"You could give a student a textbook for his class",
                        "msg_part1":"You could give ",
                        "msg_part2":" students each a textbook for their course",
                        "img_path":"img/book.png"
                      }',
    "CLOTHING_COST" => '{
                        "cost":5,
                        "count":0,
                        "msg_for_single":"You can make sure that a person has some clean and comfortable clothes",
                        "msg_part1":"You can make sure that ",
                        "msg_part2":" people get fresh, clean clothes",
                        "img_path":"img/clothes.png"
                      }',
    "BACKPACK_COST" => '{
                        "cost":3,
                        "count":0,
                        "msg_for_single":"You could aid a student with a handy backpack for school",
                        "msg_part1":"You could aid ",
                        "msg_part2":" students by giving them each a backpack for their materials",
                        "img_path":"img/backpack.png"
                      }',
    "BLANKET_COST" => '{
                        "cost":2,
                        "count":0,
                        "msg_for_single":"You could make sure that a family sleeps well at night by providing a blanket",
                        "msg_part1":"You could ensure the warmth of ",
                        "msg_part2":" families through the provision of a blanket",
                        "img_path":"img/blanket.png"
                      }',
    "MEAL_COST" => '{
                        "cost":1,
                        "count":0,
                        "msg_for_single":"You could purchase a meal for a hungry someone who eats only twice or even once a day",
                        "msg_part1":"You could purchase ",
                        "msg_part2":" meals for hungry people that could use the nutrition",
                        "img_path":"img/meal.png"
                      }',
    "WATER_COST" => '{
                        "cost":1,
                        "count":0,
                        "msg_for_single":"You can provide one water bottle with potable water to those in need",
                        "msg_part1":"You could provide ",
                        "msg_part2":" water bottles to the needy giving them a clean drinking source",
                        "img_path":"img/water.png"
                      }',
    "NOTEBOOK" => '{
                        "cost":1,
                        "count":0,
                        "msg_for_single":"You can ensure that a student can take good class notes with the help of a notebook",
                        "msg_part1":"You can support ",
                        "msg_part2":" students in their studies by giving them each a notebook",
                        "img_path":"img/notebook.png"
                      }',
    "PENCIL_COST" => '{
                        "cost":0.2,
                        "count":0,
                        "msg_for_single":"You can give the youth each a voice by letting them write with a pencil",
                        "msg_part1":"You could empower ",
                        "msg_part2":" childrens\' voices by giving them a writing utensil",
                        "img_path":"img/pencil.png"
                      }',
    "SANDALS_COST" => '{
                        "cost":1,
                        "count":0,
                        "msg_for_single":"You could provide a pair of sandals to someone who doesn\'t have shoes",
                        "msg_part1":"You could provide ",
                        "msg_part2":" pairs of sandals for people who currently walk barefoot",
                        "img_path":"img/sandals.png"
                      }',
    "FLASHLIGHT_COST" => '{
                        "cost":0.5,
                        "count":0,
                        "msg_for_single":"You could provide a flashlight to a family so they can see when power goes out",
                        "msg_part1":"You could provide ",
                        "msg_part2":" flashlights for families to see in the darkness of a power outage",
                        "img_path":"img/flashlight.png"
                      }',
    "BALL_COST" => '{
                        "cost":0.5,
                        "count":0,
                        "msg_for_single":"You can put a smile on a child\'s face by giving them a soccer ball",
                        "msg_part1":"You could put a smile on ",
                        "msg_part2":" childrens\' faces by giving them each a soccer ball to play with ",
                        "img_path":"img/ball.png"
                      }',
    "CRICKET_BAT_COST" => '{
                        "cost":10,
                        "count":0,
                        "msg_for_single":"You can provide a child with a cricket bat so they can play once in a while",
                        "msg_part1":"You can buy ",
                        "msg_part2":" cricket bats so that children in communities can play cricket in their free time",
                        "img_path":"img/cricketbat.png"
                      }',
    "CRICKET_BALL_COST" => '{
                        "cost":0.5,
                        "count":0,
                        "msg_for_single":"You can give children a cricket ball for a cricket match",
                        "msg_part1":"You can give ",
                        "msg_part2":" cricket balls to children all over Bangladesh so that they can play when they are bored",
                        "img_path":"img/cricketball.png"
                      }',
    "MANGO_COST" => '{
                        "cost":0.1,
                        "count":0,
                        "msg_for_single":"You can buy a mango for a person to enjoy in that moment",
                        "msg_part1":"You can buy ",
                        "msg_part2":" mangos for people to enjoy and refresh themselves",
                        "img_path":"img/mango.png"
                      }',
    "SALINE_COST" => '{
                        "cost":0.1,
                        "count":0,
                        "msg_for_single":"You could purchase a packet of saline for a person when they fall sick",
                        "msg_part1":"You could purchase ",
                        "msg_part2":" packets of saline for people when they fall sick",
                        "img_path":"img/saline.png"
                      }',
    "CRACKER_COST" => '{
                        "cost":0.1,
                        "count":0,
                        "msg_for_single":"You could buy a packet of crackers for a child when they are hungry",
                        "msg_part1":"You could buy ",
                        "msg_part2":" packets of crackers for children to dulge in when they are hungry",
                        "img_path":"img/cracker.png"
                      }',
    "CANDY_COST" => '{
                        "cost":0.1,
                        "count":0,
                        "msg_for_single":"You could buy a piece of candy for a kid on the streets",
                        "msg_part1":"You could buy ",
                        "msg_part2":" pieces of candy for kids on the streets to enjoy",
                        "img_path":"img/candy.png"
                      }'
  );

  // Getting the POST data from the form submitted and trimming
  $value = (int)(trim($_POST['amount']));

  // Variable declarations for all the amounts of each item listed above
  $count = 0;

  $holder = $value;


  foreach ($itemCosts as $item => $json_string) {
    $obj = json_decode($json_string);
    $cost = $obj->{'cost'};

    if ((int)(($value/2)/2) >= $cost) {
      $temp_amount = (int)((($value/2)/2)/$cost);
      $temp = $value - ($temp_amount*$cost);
      $obj->{'count'} = $temp_amount;
      $value = $temp;
    }

    // With just this and the else if below this in the algorithm we get 17 options
    else if ((int)($value/2) >= $cost) {
      $temp_amount = (int)(($value/2)/$cost);
      $temp = $value - ($temp_amount*$cost);
      $obj->{'count'} = $temp_amount;
      $value = $temp;
    }

    else if ($value <= 2 && $value >= $cost) {
      $temp_amount = (int)($value/$cost);
      $temp = $value - ($temp_amount*$cost);
      $obj->{'count'} = $temp_amount;
      $value = $temp;
    }

    $final_obj = json_encode($obj);
    $itemCosts[$item] = ''.$final_obj;

  }

?>
<html>
  <head>
    <title>Altruist - Help the needy</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Bootstrap -->
    <link href="css/bootstrap.min.css" rel="stylesheet" media="screen">
    <link href="css/bootstrap-responsive.min.css" rel="stylesheet" media="screen">
    <link href="css/main.css" rel="stylesheet" media="screen">
    <script type="text/javascript" src="http://use.typekit.net/baw6dig.js"></script>
    <script type="text/javascript">try{Typekit.load();}catch(e){}</script>
  </head>
  <body>

    <!-- REMINDER TO SELF: USE $count for the ID values and then in javascript only select a0 since that is the first one -->
    <div class="bio">
        <div class="row-fluid">
          <div class="span10 offset1">
            <div class="row-fluid" style="height:50px; display:table;">
              <p id="logo" class="text-center" style="display: table-cell; vertical-align: middle;"><a href="index.html"><img src="img/logo.png" width="250"/></a></p>
            </div>
          </div>
        </div>
      </div>

      <div class="describe">
        <div class="row-fluid">
          <div class="span10 offset1">
            <div class="row-fluid" style="width:100%;height:400px;display:table;padding-bottom:20px;">
              <h1 class="text-center" style="display: table-cell; vertical-align: middle;">Lets take a look at what <span style="font-size:72px">$</span><span id="el" style="font-size:72px;">0</span> can buy...</h1><br><br>
          </div>
          </div>
        </div>
      </div>

      <!-- <?php foreach ($itemCosts as $item => $json_string) { echo $item." ".$json_string; $obj = json_decode($json_string); echo $obj->{'count'}; } ?> -->

      <?php foreach ($itemCosts as $item => $json_string) { $obj = json_decode($json_string); if($obj->{'count'} > 0) { ?>


        <? if ($count % 2 == 1) { ?>
        <div class="finish-other">
        <? } else { ?>
        <div class="finish">
        <? } ?>
          <div class="row-fluid">
              <div class="span10 offset1">
                <? if ($count > 0) { ?>
                  <h1 class="text-center">And...</h1><br>
                <? } ?>
                <? if ($obj->{'count'} == 1) { ?>
                  <h1 class="text-center"><? echo $obj->{'msg_for_single'} ?></h1><br>
                <? } else { ?>
                  <h1 class="text-center"><? echo $obj->{'msg_part1'}." "; ?><span id="a12" class="num_incr" style="font-size:56px;"><? echo number_format($obj->{'count'}); ?></span><? echo " ".$obj->{'msg_part2'}; ?></h1><br>
                <? } echo "<br />"; $length_iterate = $obj->{'count'}; $factor = 50; if ($obj->{'count'} > 10) {$factor = 25;} if ($obj->{'count'} >= 50) {$factor = 10;} if ($obj->{'count'} >= 100) {$factor = 5;} if ($obj->{'count'} >= 200) {$factor = 3;} if ($obj->{'count'} >= 1000) {$factor = 50; $length_iterate = 10;} /*if ($obj->{'count'} > 10) { $length_iterate = 10;}*/  for ($i = 0; $i < $length_iterate; $i++) { ?>
                  <img class="img_tile" src="<? echo $obj->{'img_path'}; ?>" width="<? echo 4*$factor; ?>"/>
                <? } ?>
                <? if($obj->{'count'} >= 1000) { ?>
                  <center><p style="float:left; padding-top:30px;"><i>Each figure represents approximately <? echo number_format((int)($obj->{'count'}/10)); ?> items</i></p></center>
                <? } ?>
              </div>
          </div>
        </div>

      <? $count++; } } ?>

     <? if ($count % 2 == 1) { ?>
      <div class="finish-other">
      <? } else { ?>
      <div class="finish">
      <? } $count++; ?>
      <div class="row-fluid">
          <div class="span10 offset1">
            <h1 class="text-center">Donate to Echo</h1><br>
            <p>Your money could turn these items into reality for the poor in Bangladesh. ECHO is a non profit organization that helps the needy in Bangladesh with education, sanitation, housing, and much more including skills development so that people can earn their own living. If you are serious please consider donating today.</p><br><br>
            <div class="hidden-phone">
              <a class="go" href="#" style="font-size:36px; font-weight:bold"><center>Donate now!</center></a>
            </div>
            <div class="visible-phone">
              <center>  
                <a class="go-mobile" href="#" style="font-size:36px; font-weight:bold"><center>Donate now!</center></a>
              </center>
            </div>
          </div>
        </div>
    </div>


    <? if ($count % 2 == 1) { ?>
    <div class="finish-other">
    <? } else { ?>
    <div class="finish">
    <? } ?>
      <div class="row-fluid">
          <div class="span10 offset1">
            <h1 class="text-center">Still not convinced?</h1>
            <center><p>Lets take some time to chat.</p></center>
            <h3><center><a href="#" style="color:white">Twitter</a> | <a href="#" style="color:white">Facebook</a> | <a href="#" style="color:white">Google+</a></center></h3>
            <br />
            <? if ($count % 2 == 1) { ?>
            <center><img src="img/logo-finish.png" width="250"></center>
            <? } else { ?>
            <center><img src="img/logo-finish-other.png" width="250"></center>
            <? } ?>
            <br/>
          </div>
      </div>
    </div>
      

    <div class="footer">
      <div class="row-fluid">
        <div class="span10 offset1">
          <p>Copyright &copy; Zuhayeer Musa and Areeb Khan. All rights reserved.</p>
        </div>
      </div>
    </div>

</div> <!-- End of #after-login -->
    <script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
    <!-- <script src="js/bootstrap.min.js"></script> -->
    <script type="text/javascript" src="js/main.js"></script>
    <script>
        // Animate the element's value from x to y:
      var value_left = "<?php echo $holder; ?>";
      var time;
      if (value_left >= 8) {time=3000;}
      else {time=1000;}
      $({someValue: 0}).animate({someValue: value_left}, {
          duration: time,
          easing:'swing', // can be anything
          step: function() { // called on every step
              // Update the element's text with rounded-up value:
              $('#el').text(commaSeparateNumber(Math.round(this.someValue)));
          },
          complete: function(){
              $('#el').text(commaSeparateNumber(value_left));
          }
      });

     function commaSeparateNumber(val){
        while (/(\d+)(\d{3})/.test(val.toString())){
          val = val.toString().replace(/(\d)(?=(\d\d\d)+(?!\d))/g, "$1,");
        }
        return val;
      }
    </script>
  </body>
</html>


